name: CI

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        targetOS: [ linux, darwin, windows ]
        targetPlatform: [ amd64 ]
    steps:
      - uses: actions/checkout@v1
      - name: Setup go
        uses: actions/setup-go@v1
        with:
          go-version: '1.13.6'
      - run: env GOOS=${{ matrix.targetOS }} GOARCH=${{ matrix.targetPlatform }} go build -o bonjwa-schedule-api-${{ matrix.targetOS }}-${{ matrix.targetPlatform }}
      
      - uses: actions/upload-artifact@v1
        with:
          name: bonjwa-schedule-api-${{ matrix.targetOS }}-${{ matrix.targetPlatform }}
          path: bonjwa-schedule-api-${{ matrix.targetOS }}-${{ matrix.targetPlatform }}
